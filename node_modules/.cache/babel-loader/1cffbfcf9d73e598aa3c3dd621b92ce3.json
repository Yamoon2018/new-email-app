{"ast":null,"code":"function send_email_db(req){console.log(\"req==\"+JSON.stringify(req.body));//break;\nvar receiver_emails='';var sender_email='';var date=new Date();if(req){sender_email=JSON.stringify(req.body.sender_email);receiver_emails=JSON.stringify(req.body.receiver_email).split(',');var email_status=req.body.email_status;var email_subject=req.body.email_subject;var email_body=req.body.email_body;console.log(\"convert==\"+receiver_emails.length);}var email_output=\"\\n        \\n        <h3>Your emails sent \".concat(email_subject,\"</h3>\\n        <ul>\\n            <li> Email \").concat(email_body,\"</li>\\n        </ul>\\n    \");var tranport_email=nodemail.createTransport({port:ENV['MAILGUN_SMTP_PORT'],address:ENV['MAILGUN_SMTP_SERVER'],host:'https://heroku-email-app.herokuapp.com',auth:{user:ENV['MAILGUN_SMTP_LOGIN'],pass:ENV['MAILGUN_SMTP_PASSWORD']}});var email_counter_start=0;email_status===\"all\"?receiver_email_list=[receiver_emails]:receiver_email_list=receiver_emails;while(email_counter_start<receiver_email_list.length){console.log(\"email options==\"+receiver_email_list[email_counter_start]);var mailoptions={from:sender_email,//\"yamin.barakat@gmail.com\",\nto:receiver_email_list[email_counter_start],subject:email_subject+'  '+date,text:email_body,html:email_output};tranport_email.sendMail(mailoptions,function(err,info){if(err){return console.log(err);}console.log('email sent %s',info.messageId);});email_counter_start+=1;}//send_DB(req, res);\n}","map":{"version":3,"sources":["/home/yamin/My_repos/new-email-app/new-email-app/src/send_email_smtp.js"],"names":["send_email_db","req","console","log","JSON","stringify","body","receiver_emails","sender_email","date","Date","receiver_email","split","email_status","email_subject","email_body","length","email_output","tranport_email","nodemail","createTransport","port","ENV","address","host","auth","user","pass","email_counter_start","receiver_email_list","mailoptions","from","to","subject","text","html","sendMail","err","info","messageId"],"mappings":"AAAA,QAASA,CAAAA,aAAT,CAAuBC,GAAvB,CAA2B,CACvBC,OAAO,CAACC,GAAR,CAAY,QAASC,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACK,IAAnB,CAArB,EACA;AACA,GAAIC,CAAAA,eAAe,CAAC,EAApB,CACA,GAAIC,CAAAA,YAAY,CAAC,EAAjB,CACA,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,EAAX,CACE,GAAGT,GAAH,CAAO,CAEHO,YAAY,CAAGJ,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACK,IAAJ,CAASE,YAAxB,CAAf,CACFD,eAAe,CAAGH,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACK,IAAJ,CAASK,cAAxB,EAAwCC,KAAxC,CAA8C,GAA9C,CAAlB,CAEA,GAAIC,CAAAA,YAAY,CAAMZ,GAAG,CAACK,IAAJ,CAASO,YAA/B,CACA,GAAIC,CAAAA,aAAa,CAAGb,GAAG,CAACK,IAAJ,CAASQ,aAA7B,CACA,GAAIC,CAAAA,UAAU,CAAGd,GAAG,CAACK,IAAJ,CAASS,UAA1B,CACAb,OAAO,CAACC,GAAR,CAAY,YAAYI,eAAe,CAACS,MAAxC,EAGH,CAGD,GAAMC,CAAAA,YAAY,oDAESH,aAFT,wDAIGC,UAJH,8BAAlB,CAQA,GAAIG,CAAAA,cAAc,CAAGC,QAAQ,CAACC,eAAT,CAAyB,CAC5CC,IAAI,CAAEC,GAAG,CAAC,mBAAD,CADmC,CAE5CC,OAAO,CAAED,GAAG,CAAC,qBAAD,CAFgC,CAG5CE,IAAI,CAAE,wCAHsC,CAI1CC,IAAI,CAAE,CACJC,IAAI,CAAEJ,GAAG,CAAC,oBAAD,CADL,CAEJK,IAAI,CAAEL,GAAG,CAAC,uBAAD,CAFL,CAJoC,CAAzB,CAArB,CAUA,GAAIM,CAAAA,mBAAmB,CAAE,CAAzB,CAEAf,YAAY,GAAK,KAAjB,CAAyBgB,mBAAmB,CAAC,CAACtB,eAAD,CAA7C,CAAiEsB,mBAAmB,CAAGtB,eAAvF,CAEA,MAAQqB,mBAAmB,CAAGC,mBAAmB,CAACb,MAAlD,CAA0D,CAExDd,OAAO,CAACC,GAAR,CAAY,kBAAkB0B,mBAAmB,CAACD,mBAAD,CAAjD,EACE,GAAIE,CAAAA,WAAW,CAAG,CACdC,IAAI,CAAEvB,YADQ,CACM;AACpBwB,EAAE,CAAEH,mBAAmB,CAACD,mBAAD,CAFT,CAGdK,OAAO,CAAEnB,aAAa,CAAC,IAAd,CAAmBL,IAHd,CAIdyB,IAAI,CAAEnB,UAJQ,CAKdoB,IAAI,CAAElB,YALQ,CAAlB,CASAC,cAAc,CAACkB,QAAf,CAAwBN,WAAxB,CAAqC,SAACO,GAAD,CAAMC,IAAN,CAAa,CAC9C,GAAGD,GAAH,CAAQ,CACJ,MAAOnC,CAAAA,OAAO,CAACC,GAAR,CAAYkC,GAAZ,CAAP,CACH,CACDnC,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6BmC,IAAI,CAACC,SAAlC,EACH,CALD,EAOFX,mBAAmB,EAAG,CAAtB,CACD,CACD;AACD","sourcesContent":["function send_email_db(req){\n    console.log(\"req==\"+ JSON.stringify(req.body));\n    //break;\n    var receiver_emails='';\n    var sender_email='';\n    var date = new Date();\n      if(req){\n        \n          sender_email = JSON.stringify(req.body.sender_email);\n        receiver_emails = JSON.stringify(req.body.receiver_email).split(',');\n          \n        var email_status   =  req.body.email_status;\n        var email_subject = req.body.email_subject;\n        var email_body = req.body.email_body;\n        console.log(\"convert==\"+receiver_emails.length); \n        \n  \n    }\n  \n  \n    const email_output = `\n        \n        <h3>Your emails sent ${email_subject}</h3>\n        <ul>\n            <li> Email ${email_body}</li>\n        </ul>\n    `;\n  \n    let tranport_email = nodemail.createTransport({\n      port: ENV['MAILGUN_SMTP_PORT'],\n      address: ENV['MAILGUN_SMTP_SERVER'],    \n      host: 'https://heroku-email-app.herokuapp.com',\n        auth: {\n          user: ENV['MAILGUN_SMTP_LOGIN'],\n          pass: ENV['MAILGUN_SMTP_PASSWORD'],\n        }\n    });\n    \n    var email_counter_start =0;\n  \n    email_status === \"all\" ? receiver_email_list=[receiver_emails] : receiver_email_list = receiver_emails;\n       \n    while  (email_counter_start < receiver_email_list.length) {\n    \n      console.log(\"email options==\"+receiver_email_list[email_counter_start]);\n        let mailoptions = {\n            from: sender_email, //\"yamin.barakat@gmail.com\",\n            to: receiver_email_list[email_counter_start],\n            subject: email_subject+'  '+date,\n            text: email_body,\n            html: email_output\n        };\n        \n    \n        tranport_email.sendMail(mailoptions, (err, info)=>{\n            if(err) {\n                return console.log(err);\n            }\n            console.log('email sent %s', info.messageId );\n        });\n      \n      email_counter_start +=1;\n    }\n    //send_DB(req, res);\n  }"]},"metadata":{},"sourceType":"module"}