{"ast":null,"code":"var nodemail=require('nodemailer');function send_email_db(req){console.log(\"req==\"+JSON.stringify(req.body));//break;\nvar receiver_emails='';var sender_email='';var date=new Date();if(req){sender_email=JSON.stringify(req.body.sender_email);receiver_emails=JSON.stringify(req.body.receiver_email).split(',');var email_status=req.body.email_status;var email_subject=req.body.email_subject;var email_body=req.body.email_body;console.log(\"convert==\"+receiver_emails.length);}var email_output=\"\\n        \\n        <h3>Your emails sent \".concat(email_subject,\"</h3>\\n        <ul>\\n            <li> Email \").concat(email_body,\"</li>\\n        </ul>\\n    \");var tranport_email=nodemail.createTransport({port:587,address:smtp.mailgun.org,host:'https://heroku-email-app.herokuapp.com',auth:{user:'postmaster@sandbox9ec8e5daaec146fca37a45479baea5f2.mailgun.org',pass:'98e50b79f92e630a413bc3d8a7716c02-2af183ba-fa201257'}});var email_counter_start=0;var receiver_email_list=0;email_status===\"all\"?receiver_email_list=[receiver_emails]:receiver_email_list=receiver_emails;while(email_counter_start<receiver_email_list.length){console.log(\"email options==\"+receiver_email_list[email_counter_start]);var mailoptions={from:sender_email,//\"yamin.barakat@gmail.com\",\nto:receiver_email_list[email_counter_start],subject:email_subject+'  '+date,text:email_body,html:email_output};tranport_email.sendMail(mailoptions,function(err,info){if(err){return console.log(err);}console.log('email sent %s',info.messageId);});email_counter_start+=1;}//send_DB(req, res);\n}","map":{"version":3,"sources":["/home/yamin/My_repos/new-email-app/new-email-app/src/send_email_smtp.js"],"names":["nodemail","require","send_email_db","req","console","log","JSON","stringify","body","receiver_emails","sender_email","date","Date","receiver_email","split","email_status","email_subject","email_body","length","email_output","tranport_email","createTransport","port","address","smtp","mailgun","org","host","auth","user","pass","email_counter_start","receiver_email_list","mailoptions","from","to","subject","text","html","sendMail","err","info","messageId"],"mappings":"AAAA,GAAIA,CAAAA,QAAQ,CAAGC,OAAO,CAAC,YAAD,CAAtB,CAEA,QAASC,CAAAA,aAAT,CAAuBC,GAAvB,CAA2B,CACvBC,OAAO,CAACC,GAAR,CAAY,QAASC,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACK,IAAnB,CAArB,EACA;AACA,GAAIC,CAAAA,eAAe,CAAC,EAApB,CACA,GAAIC,CAAAA,YAAY,CAAC,EAAjB,CACA,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,EAAX,CACE,GAAGT,GAAH,CAAO,CAEHO,YAAY,CAAGJ,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACK,IAAJ,CAASE,YAAxB,CAAf,CACFD,eAAe,CAAGH,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACK,IAAJ,CAASK,cAAxB,EAAwCC,KAAxC,CAA8C,GAA9C,CAAlB,CAEA,GAAIC,CAAAA,YAAY,CAAMZ,GAAG,CAACK,IAAJ,CAASO,YAA/B,CACA,GAAIC,CAAAA,aAAa,CAAGb,GAAG,CAACK,IAAJ,CAASQ,aAA7B,CACA,GAAIC,CAAAA,UAAU,CAAGd,GAAG,CAACK,IAAJ,CAASS,UAA1B,CACAb,OAAO,CAACC,GAAR,CAAY,YAAYI,eAAe,CAACS,MAAxC,EAGH,CAGD,GAAMC,CAAAA,YAAY,oDAESH,aAFT,wDAIGC,UAJH,8BAAlB,CAQA,GAAIG,CAAAA,cAAc,CAAGpB,QAAQ,CAACqB,eAAT,CAAyB,CAC5CC,IAAI,CAAE,GADsC,CAE5CC,OAAO,CAAEC,IAAI,CAACC,OAAL,CAAaC,GAFsB,CAG5CC,IAAI,CAAE,wCAHsC,CAI1CC,IAAI,CAAE,CACFC,IAAI,CAAE,gEADJ,CAEFC,IAAI,CAAE,oDAFJ,CAJoC,CAAzB,CAArB,CAUA,GAAIC,CAAAA,mBAAmB,CAAE,CAAzB,CACA,GAAIC,CAAAA,mBAAmB,CAAE,CAAzB,CAEAjB,YAAY,GAAK,KAAjB,CAAyBiB,mBAAmB,CAAC,CAACvB,eAAD,CAA7C,CAAiEuB,mBAAmB,CAAGvB,eAAvF,CAEA,MAAQsB,mBAAmB,CAAGC,mBAAmB,CAACd,MAAlD,CAA0D,CAExDd,OAAO,CAACC,GAAR,CAAY,kBAAkB2B,mBAAmB,CAACD,mBAAD,CAAjD,EACE,GAAIE,CAAAA,WAAW,CAAG,CACdC,IAAI,CAAExB,YADQ,CACM;AACpByB,EAAE,CAAEH,mBAAmB,CAACD,mBAAD,CAFT,CAGdK,OAAO,CAAEpB,aAAa,CAAC,IAAd,CAAmBL,IAHd,CAId0B,IAAI,CAAEpB,UAJQ,CAKdqB,IAAI,CAAEnB,YALQ,CAAlB,CASAC,cAAc,CAACmB,QAAf,CAAwBN,WAAxB,CAAqC,SAACO,GAAD,CAAMC,IAAN,CAAa,CAC9C,GAAGD,GAAH,CAAQ,CACJ,MAAOpC,CAAAA,OAAO,CAACC,GAAR,CAAYmC,GAAZ,CAAP,CACH,CACDpC,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6BoC,IAAI,CAACC,SAAlC,EACH,CALD,EAOFX,mBAAmB,EAAG,CAAtB,CACD,CACD;AACD","sourcesContent":["var nodemail = require('nodemailer');\n\nfunction send_email_db(req){\n    console.log(\"req==\"+ JSON.stringify(req.body));\n    //break;\n    var receiver_emails='';\n    var sender_email='';\n    var date = new Date();\n      if(req){\n        \n          sender_email = JSON.stringify(req.body.sender_email);\n        receiver_emails = JSON.stringify(req.body.receiver_email).split(',');\n          \n        var email_status   =  req.body.email_status;\n        var email_subject = req.body.email_subject;\n        var email_body = req.body.email_body;\n        console.log(\"convert==\"+receiver_emails.length); \n        \n  \n    }\n  \n  \n    const email_output = `\n        \n        <h3>Your emails sent ${email_subject}</h3>\n        <ul>\n            <li> Email ${email_body}</li>\n        </ul>\n    `;\n  \n    let tranport_email = nodemail.createTransport({\n      port: 587,\n      address: smtp.mailgun.org,    \n      host: 'https://heroku-email-app.herokuapp.com',\n        auth: {\n            user: 'postmaster@sandbox9ec8e5daaec146fca37a45479baea5f2.mailgun.org' ,\n            pass: '98e50b79f92e630a413bc3d8a7716c02-2af183ba-fa201257',\n        }\n    });\n    \n    var email_counter_start =0;\n    var receiver_email_list =0;\n  \n    email_status === \"all\" ? receiver_email_list=[receiver_emails] : receiver_email_list = receiver_emails;\n       \n    while  (email_counter_start < receiver_email_list.length) {\n    \n      console.log(\"email options==\"+receiver_email_list[email_counter_start]);\n        let mailoptions = {\n            from: sender_email, //\"yamin.barakat@gmail.com\",\n            to: receiver_email_list[email_counter_start],\n            subject: email_subject+'  '+date,\n            text: email_body,\n            html: email_output\n        };\n        \n    \n        tranport_email.sendMail(mailoptions, (err, info)=>{\n            if(err) {\n                return console.log(err);\n            }\n            console.log('email sent %s', info.messageId );\n        });\n      \n      email_counter_start +=1;\n    }\n    //send_DB(req, res);\n  }"]},"metadata":{},"sourceType":"module"}